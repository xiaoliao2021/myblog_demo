## test测试

```js
    test() {
      let obj = {
        sha: "ffe5cc36249139518dab9aec3d3257ef0c548c78",
        url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/trees/ffe5cc36249139518dab9aec3d3257ef0c548c78",
        tree: [
          {
            path: ".gitignore",
            mode: "100644",
            type: "blob",
            sha: "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            size: 0,
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/blobs/e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
          },
          {
            path: "classification_1",
            mode: "040000",
            type: "tree",
            sha: "617d3e46019bc06ae69308cd523292cd4c04633a",
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/trees/617d3e46019bc06ae69308cd523292cd4c04633a",
          },
          {
            path: "classification_1/.gitignore",
            mode: "100644",
            type: "blob",
            sha: "8b137891791fe96927ad78e64b0aad7bded08bdc",
            size: 1,
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/blobs/8b137891791fe96927ad78e64b0aad7bded08bdc",
          },
          {
            path: "classification_1/classification_1_1",
            mode: "040000",
            type: "tree",
            sha: "cc9200ebe0f22c3ee755e4446088fe13aaf08d35",
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/trees/cc9200ebe0f22c3ee755e4446088fe13aaf08d35",
          },
          {
            path: "classification_1/classification_1_1/.gitignore",
            mode: "100644",
            type: "blob",
            sha: "8b137891791fe96927ad78e64b0aad7bded08bdc",
            size: 1,
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/blobs/8b137891791fe96927ad78e64b0aad7bded08bdc",
          },
          {
            path: "classification_1/classification_1_1/1639540334_测试文件.md",
            mode: "100644",
            type: "blob",
            sha: "3cd7e4f90d724f29d7dbcd11d9cae07a231ddf72",
            size: 15,
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/blobs/3cd7e4f90d724f29d7dbcd11d9cae07a231ddf72",
          },
          {
            path: "classification_1/classification_1_2",
            mode: "040000",
            type: "tree",
            sha: "fca5082c1afab5e4f05112e4c3604eb337d49489",
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/trees/fca5082c1afab5e4f05112e4c3604eb337d49489",
          },
          {
            path: "classification_1/classification_1_2/.gitignore",
            mode: "100644",
            type: "blob",
            sha: "8b137891791fe96927ad78e64b0aad7bded08bdc",
            size: 1,
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/blobs/8b137891791fe96927ad78e64b0aad7bded08bdc",
          },
          {
            path: "classification_2",
            mode: "040000",
            type: "tree",
            sha: "b2c008e92a70873de940613ebfba3e973f869f3b",
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/trees/b2c008e92a70873de940613ebfba3e973f869f3b",
          },
          {
            path: "classification_2/.gitignore",
            mode: "100644",
            type: "blob",
            sha: "8b137891791fe96927ad78e64b0aad7bded08bdc",
            size: 1,
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/blobs/8b137891791fe96927ad78e64b0aad7bded08bdc",
          },
          {
            path: "classification_2/classification_2_1",
            mode: "040000",
            type: "tree",
            sha: "7d380ef5328dd83031860c7e9dac9d526a4d15e7",
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/trees/7d380ef5328dd83031860c7e9dac9d526a4d15e7",
          },
          {
            path: "classification_2/classification_2_1/.gitignore",
            mode: "100644",
            type: "blob",
            sha: "8b137891791fe96927ad78e64b0aad7bded08bdc",
            size: 1,
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/blobs/8b137891791fe96927ad78e64b0aad7bded08bdc",
          },
          {
            path: "classification_2/classification_2_1/classification_2_1_1",
            mode: "040000",
            type: "tree",
            sha: "fca5082c1afab5e4f05112e4c3604eb337d49489",
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/trees/fca5082c1afab5e4f05112e4c3604eb337d49489",
          },
          {
            path: "classification_2/classification_2_1/classification_2_1_1/.gitignore",
            mode: "100644",
            type: "blob",
            sha: "8b137891791fe96927ad78e64b0aad7bded08bdc",
            size: 1,
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/blobs/8b137891791fe96927ad78e64b0aad7bded08bdc",
          },
          {
            path: "classification_3",
            mode: "040000",
            type: "tree",
            sha: "fca5082c1afab5e4f05112e4c3604eb337d49489",
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/trees/fca5082c1afab5e4f05112e4c3604eb337d49489",
          },
          {
            path: "classification_3/.gitignore",
            mode: "100644",
            type: "blob",
            sha: "8b137891791fe96927ad78e64b0aad7bded08bdc",
            size: 1,
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/blobs/8b137891791fe96927ad78e64b0aad7bded08bdc",
          },
        ],
        truncated: false,
      };
      let trees = obj.tree;
      let tree_map = {};
      let root_node = {
        name: github_config_data.note_root_path,
        path: github_config_data.note_root_path,
        sha: obj.sha,
        children: [],
      };
      tree_map[github_config_data.note_root_path] = root_node;
      trees.forEach((item) => {
        let { path, sha, type } = item;
        // 跳过忽视文件
        if (path.indexOf(".gitignore") != -1) return;
        let path_split = path.split("/");
        // 新节点
        let new_node = {
          name: path_split[path_split.length - 1],
          path: `${github_config_data.note_root_path}/${path}`,
          sha: sha,
          children: "tree" === type ? [] : undefined,
        };
        //找最后一个"/"的索引
        let index = path.lastIndexOf("/");
        // 获取父节点的key
        let pre_key =
          index === -1
            ? github_config_data.note_root_path
            : path.substr(0, index);
        tree_map[pre_key].children.push(new_node); //父节点添加当前节点
        tree_map[path] = new_node; //存入当前节点
      });
      console.log(JSON.stringify(root_node));
    },
    test2() {
      let obj = {
        sha: "ffe5cc36249139518dab9aec3d3257ef0c548c78",
        url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/trees/ffe5cc36249139518dab9aec3d3257ef0c548c78",
        tree: [
          {
            path: ".gitignore",
            mode: "100644",
            type: "blob",
            sha: "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            size: 0,
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/blobs/e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
          },
          {
            path: "classification_1",
            mode: "040000",
            type: "tree",
            sha: "617d3e46019bc06ae69308cd523292cd4c04633a",
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/trees/617d3e46019bc06ae69308cd523292cd4c04633a",
          },
          {
            path: "classification_1/.gitignore",
            mode: "100644",
            type: "blob",
            sha: "8b137891791fe96927ad78e64b0aad7bded08bdc",
            size: 1,
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/blobs/8b137891791fe96927ad78e64b0aad7bded08bdc",
          },
          {
            path: "classification_1/classification_1_1",
            mode: "040000",
            type: "tree",
            sha: "cc9200ebe0f22c3ee755e4446088fe13aaf08d35",
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/trees/cc9200ebe0f22c3ee755e4446088fe13aaf08d35",
          },
          {
            path: "classification_1/classification_1_1/.gitignore",
            mode: "100644",
            type: "blob",
            sha: "8b137891791fe96927ad78e64b0aad7bded08bdc",
            size: 1,
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/blobs/8b137891791fe96927ad78e64b0aad7bded08bdc",
          },
          {
            path: "classification_1/classification_1_1/1639540334_测试文件.md",
            mode: "100644",
            type: "blob",
            sha: "3cd7e4f90d724f29d7dbcd11d9cae07a231ddf72",
            size: 15,
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/blobs/3cd7e4f90d724f29d7dbcd11d9cae07a231ddf72",
          },
          {
            path: "classification_1/classification_1_2",
            mode: "040000",
            type: "tree",
            sha: "fca5082c1afab5e4f05112e4c3604eb337d49489",
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/trees/fca5082c1afab5e4f05112e4c3604eb337d49489",
          },
          {
            path: "classification_1/classification_1_2/.gitignore",
            mode: "100644",
            type: "blob",
            sha: "8b137891791fe96927ad78e64b0aad7bded08bdc",
            size: 1,
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/blobs/8b137891791fe96927ad78e64b0aad7bded08bdc",
          },
          {
            path: "classification_2",
            mode: "040000",
            type: "tree",
            sha: "b2c008e92a70873de940613ebfba3e973f869f3b",
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/trees/b2c008e92a70873de940613ebfba3e973f869f3b",
          },
          {
            path: "classification_2/.gitignore",
            mode: "100644",
            type: "blob",
            sha: "8b137891791fe96927ad78e64b0aad7bded08bdc",
            size: 1,
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/blobs/8b137891791fe96927ad78e64b0aad7bded08bdc",
          },
          {
            path: "classification_2/classification_2_1",
            mode: "040000",
            type: "tree",
            sha: "7d380ef5328dd83031860c7e9dac9d526a4d15e7",
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/trees/7d380ef5328dd83031860c7e9dac9d526a4d15e7",
          },
          {
            path: "classification_2/classification_2_1/.gitignore",
            mode: "100644",
            type: "blob",
            sha: "8b137891791fe96927ad78e64b0aad7bded08bdc",
            size: 1,
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/blobs/8b137891791fe96927ad78e64b0aad7bded08bdc",
          },
          {
            path: "classification_2/classification_2_1/classification_2_1_1",
            mode: "040000",
            type: "tree",
            sha: "fca5082c1afab5e4f05112e4c3604eb337d49489",
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/trees/fca5082c1afab5e4f05112e4c3604eb337d49489",
          },
          {
            path: "classification_2/classification_2_1/classification_2_1_1/.gitignore",
            mode: "100644",
            type: "blob",
            sha: "8b137891791fe96927ad78e64b0aad7bded08bdc",
            size: 1,
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/blobs/8b137891791fe96927ad78e64b0aad7bded08bdc",
          },
          {
            path: "classification_3",
            mode: "040000",
            type: "tree",
            sha: "fca5082c1afab5e4f05112e4c3604eb337d49489",
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/trees/fca5082c1afab5e4f05112e4c3604eb337d49489",
          },
          {
            path: "classification_3/.gitignore",
            mode: "100644",
            type: "blob",
            sha: "8b137891791fe96927ad78e64b0aad7bded08bdc",
            size: 1,
            url: "https://api.github.com/repos/xiaoliao2021/myblog_demo/git/blobs/8b137891791fe96927ad78e64b0aad7bded08bdc",
          },
        ],
        truncated: false,
      };
      let trees = obj.tree;
      let pre_depth = 0;
      let root_node = {
        name: github_config_data.note_root_path,
        path: github_config_data.note_root_path,
        sha: obj.sha,
        children: [],
      };
      let stack = new Array(); //栈
      stack.push(root_node); //根节点入栈
      let pre_node = root_node; //父节点
      let last_node = null; //上一个节点
      trees.forEach((item) => {
        let { path, sha, type } = item;
        // 跳过忽视文件
        if (path.indexOf(".gitignore") != -1) return;
        // 分割路径
        let path_split = path.split("/");
        // 路径深度
        let path_depth = path_split.length;
        // 新节点
        let new_node = {
          name: path_split[path_depth - 1],
          path: `${github_config_data.note_root_path}/${path}`,
          sha: sha,
          children: "tree" === type ? [] : undefined,
        };
        if (path_depth == pre_depth + 1) {
          //不需要切换父节点
          pre_node.children.push(new_node); // 添加子节点
        } else if (path_depth > pre_depth + 1) {
          // 进入下一级子目录
          pre_node = last_node; // 上一个节点作为当前的父节点
          pre_node.children.push(new_node); // 添加子节点
          stack.push(pre_node); //父节点入栈
          pre_depth++; // 目录深度更新
        } else {
          // 循环退出目录
          while (pre_depth > path_depth - 1) {
            stack.pop();
            pre_depth--;
          }
          // 重新获取父节点
          pre_node = stack[stack.length - 1];
          pre_node.children.push(new_node); // 添加子节点
        }
        last_node = new_node; //更新上一个节点
      });
      console.log(JSON.stringify(root_node));
    },
```

